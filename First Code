var searchHistoryTableView: UITableView!
var searchHistory: [String] = UserDefaults.standard.stringArray(forKey: "searchHistory") ?? []

// Number of rows
public func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    if tableView == searchHistoryTableView {
        return searchHistory.count
    }
    return searchMoleculesInfo?.count ?? 0 // For searchSuggestionsTableView
}

// Cell for row
public func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    if tableView == searchHistoryTableView {
        let cell = tableView.dequeueReusableCell(withIdentifier: "HistoryCell", for: indexPath)
        cell.textLabel?.text = searchHistory[indexPath.row] // Display search history
        return cell
    }
    
    // Handle cell for searchSuggestionsTableView
    guard let moleculeInfo = searchMoleculesInfo?[indexPath.row],
          let cell = tableView.dequeueReusableCell(withIdentifier: moleculeInfo.identifier) else {
        return UITableViewCell()
    }
    
    // Configure the cell for suggestions
    (cell as? MoleculeViewProtocol)?.reset()
    cell.isUserInteractionEnabled = true
    (cell as? MoleculeListCellProtocol)?.setLines(with: searchTemplateModel?.line, delegateObject: delegateObject(), additionalData: nil, indexPath: indexPath)
    (cell as? MoleculeViewProtocol)?.set(with: moleculeInfo.molecule, delegateObject: delegateObject(), nil)
    (cell as? SomeViewProtocol)?.updateView(tableView.bounds.width)
    cell.layoutIfNeeded()
    return cell
}


public override func textFieldShouldReturn(_ textField: UITextField) -> Bool {
    handleSearchDoneAction(textField.text)
    return true
}

func updateTableViewVisibility() {
    if searchTextField?.text?.isEmpty == true {
        searchHistoryTableView.isHidden = false
        searchSuggestionsTableView.isHidden = true
    } else {
        searchHistoryTableView.isHidden = true
        searchSuggestionsTableView.isHidden = false
    }
}

public override func textFieldDidChangeSelection(_ textField: UITextField) {
    updateTableViewVisibility()
}


override func viewDidLoad() {
    super.viewDidLoad()
    setupSearchSuggestionsTableView()
    setupSearchHistoryTableView() // Add this line
    // Other setup code...
}

